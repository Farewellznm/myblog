---
title: "可视化（1）：云雨图 "
author: "LHS"
date: "2021-12-08"
category: 可视化
tags: 
- 可视化
output: html_document
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<p>云雨图（RainCloudPlot）可以展示分布、散点、箱线图三种图像为基础的复合可视化：</p>
<div id="调用现成的工具" class="section level1">
<h1>调用现成的工具</h1>
<p><code>raincloudplots</code>是基于<code>ggplot2</code>里面的一个包。</p>
<pre class="r"><code>if (!require(remotes)) {
    install.packages(&quot;remotes&quot;)
}
remotes::install_github(&#39;jorvlan/raincloudplots&#39;)
library(raincloudplots)</code></pre>
<p>生成一些数据：</p>
<pre class="r"><code>set.seed(3)
prior &lt;- replicate(n = 3, rnorm(n = 500, mean = 65, sd = 5))
final_single &lt;- rnorm(n = 500, mean = 72, sd = 6)
final_multi_consistent &lt;- rnorm(n = 500, mean = 75, sd = 7)
final_multi_inconsistent &lt;- rnorm(n = 500, mean = 55, sd = 9)</code></pre>
<p>预处理数据</p>
<pre class="r"><code>df_2x3 &lt;- data_2x2(
  array_1 = prior[,1],
  array_2 = final_single,
  array_3 = prior[,2],
  array_4 = final_multi_consistent,
  array_5 = prior[,3],
  array_6 = final_multi_inconsistent,
  labels = (c(&#39;Prior Beliefs&#39;,&#39;Final Beliefs&#39;)),
  jit_distance = .09,
  jit_seed = 321) </code></pre>
<p>绘图函数</p>
<pre class="r"><code>colors &lt;- rep(c(&quot;dodgerblue&quot;, &quot;darkorange&quot;), 3) #choose colors 

raincloud_2x3_repmes(
  data = df_2x3,
  colors = colors,
  fills = colors,
  size = 1,
  alpha = .6,
  ort = &quot;h&quot;) + #set to v for vertical plot
  
  scale_x_continuous(
    breaks = c(1,2,3), 
    limits = c(0.8, 4.3), 
    labels = rep(&quot;&quot;, 3)) +
  ylab(&quot;Rated Beliefs&quot;) +
  
  annotate(geom = &quot;text&quot;, 
           label = &quot;Single-Analyst&quot;, 
           x = 1.5, y = 42) + 
  annotate(geom = &quot;text&quot;, 
           label = &quot;Multi-Analyst: Consistent&quot;, 
           x = 2.5, y = 38) + 
  annotate(geom = &quot;text&quot;, 
           label = &quot;Multi-Analyst: Inconsistent&quot;,
           x = 3.9, y = 38) + 
  annotate(geom = &quot;text&quot;, 
           label = &quot;Prior Beliefs&quot;, 
           x = 4.2, y = 55, size = 5, 
           color = &quot;dodgerblue&quot;) + 
  annotate(geom = &quot;text&quot;, 
           label = &quot;vs.&quot;, 
           x = 4.2, y = 66, size = 5) + 
  annotate(geom = &quot;text&quot;, 
           label = &quot;Final Beliefs&quot;, 
           x = 4.2, y = 77, size = 5, 
           color = &quot;darkorange&quot;) + 
  
  theme_classic() +
  theme(axis.ticks.y = element_blank(),
        axis.text = element_text(size = 9),
        axis.title.y = element_blank())</code></pre>
<p><img src="/posts/2021-12-08-Plot1_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
</div>
<div id="ref" class="section level1">
<h1>Ref</h1>
<p>Allen M, Poggiali D, Whitaker K et al. Raincloud plots: a multi-platform tool for robust data visualization [version 2; peer review: 2 approved]. Wellcome Open Res 2021, 4:63. DOI: 10.12688/wellcomeopenres.15191.2</p>
</div>
